<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Domain_name (domain-name.Domain_name)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">domain-name</a> &#x00BB; Domain_name</nav><h1>Module <code>Domain_name</code></h1><nav class="toc"><ul><li><a href="#constructor">Constructor</a></li><li><a href="#string-representation">String representation</a></li><li><a href="#predicates-and-basic-operations">Predicates and basic operations</a></li><li><a href="#comparison">Comparison</a></li><li><a href="#collections">Collections</a></li><li><a href="#string-list-representation">String list representation</a></li><li><a href="#pretty-printer">Pretty printer</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>The type of a domain name, a sequence of labels separated by dots. Each label may contain any bytes. The length of each label may not exceed 63 characters. The total length of a domain name is limited to 253 (its byte representation is 255), but other protocols (such as SMTP) may apply even smaller limits. A domain name label is case preserving, comparison is done in a case insensitive manner. Every <code>t</code> is a fully qualified domain name, its last label is the <code>root</code> label. The specification of domain names originates from <a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a>.</p><p>The invariants on the length of domain names are preserved throughout the module - no <code>t</code> will exist which violates these.</p><p>Phantom types are used for further name restrictions, <a href="index.html#val-host"><code>host</code></a> checks for host names (<code>`host t</code>): only letters, digits, and hyphen allowed, hyphen not first character of a label, the last label must contain at least on letter. <a href="index.html#val-service"><code>service</code></a> checks for a service name (<code>`service t</code>): its first label is a service name: 1-15 characters, no double-hyphen, hyphen not first or last charactes, only letters, digits and hyphen allowed, and the second label is a protocol (<code>_tcp</code> or <code>_udp</code> or <code>_sctp</code>).</p><p>When a <code>t</code> is constructed (either from a string, etc.), it is a <code>`raw t</code>. Subsequent modifications, such as adding or removing labels, appending, of any kind of name also result in a <code>`raw t</code>, which needs to be checked for <code>`host t</code> (using <a href="index.html#val-host"><code>host</code></a>) or <code>`service t</code> (using <a href="index.html#val-service"><code>service</code></a>) if desired.</p><p>Constructing a <code>t</code> (via <a href="index.html#val-of_string"><code>of_string</code></a>, <a href="index.html#val-of_string_exn"><code>of_string_exn</code></a>, <a href="index.html#val-of_strings"><code>of_strings</code></a> etc.) does not require a trailing dot.</p><p><em>v0.2.1 - <a href="https://github.com/hannesm/domain-name">homepage</a></em></p></dd></dl><section><header><h3 id="constructor"><a href="#constructor" class="anchor"></a>Constructor</h3></header><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val</span> root : <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>root</code> is the root domain (&quot;.&quot;), the empty label.</p></dd></dl></section><section><header><h3 id="string-representation"><a href="#string-representation" class="anchor"></a>String representation</h3></header><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : string <span>&#45;&gt;</span> <span><span>(<span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>of_string name</code> is either <code>t</code>, the domain name, or an error if the provided <code>name</code> is not a valid domain name. A trailing dot is not requred.</p></dd></dl><dl><dt class="spec value" id="val-of_string_exn"><a href="#val-of_string_exn" class="anchor"></a><code><span class="keyword">val</span> of_string_exn : string <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_string_exn name</code> is <code>t</code>, the domain name. A trailing dot is not required.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>name</code> is not a valid domain name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <span>?&#8288;trailing:bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string ~trailing t</code> is <code>String.concat ~sep:&quot;.&quot; (to_strings t)</code>, a human-readable representation of <code>t</code>. If <code>trailing</code> is provided and <code>true</code> (defaults to <code>false</code>), the resulting string will contain a trailing dot.</p></dd></dl></section><section><header><h3 id="predicates-and-basic-operations"><a href="#predicates-and-basic-operations" class="anchor"></a>Predicates and basic operations</h3></header><dl><dt class="spec value" id="val-canonical"><a href="#val-canonical" class="anchor"></a><code><span class="keyword">val</span> canonical : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>canonical t</code> is <code>t'</code>, the canonical domain name, as specified in RFC 4034 (and 2535): all characters are lowercase.</p></dd></dl><dl><dt class="spec value" id="val-host"><a href="#val-host" class="anchor"></a><code><span class="keyword">val</span> host : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span><span>[ `host ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>host t</code> is a <code>`host t</code> if <code>t</code> is a hostname: the contents of the domain name is limited: each label may start with a digit or letter, followed by digits, letters, or hyphens.</p></dd></dl><dl><dt class="spec value" id="val-host_exn"><a href="#val-host_exn" class="anchor"></a><code><span class="keyword">val</span> host_exn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `host ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>host_exn t</code> is a <code>`host t</code> if <code>t</code> is a hostname: the contents of the domain name is limited: each label may start with a digit or letter, followed by digits, letters, or hyphens.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>t</code> is not a hostname.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-service"><a href="#val-service" class="anchor"></a><code><span class="keyword">val</span> service : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span><span>[ `service ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>service t</code> is <code>`service t</code> if <code>t</code> contains a service name, the following conditions have to be met: The first label is a service name (or port number); an underscore preceding 1-15 characters from the set <code>- a-z A-Z 0-9</code>. The service name may not contain a hyphen (<code>-</code>) following another hyphen; no hyphen at the beginning or end.</p><p>The second label is the protocol, one of <code>_tcp</code>, <code>_udp</code>, or <code>_sctp</code>. The remaining labels must form a valid hostname.</p><p>This function can be used to validate RR's of the types SRV (RFC 2782) and TLSA (RFC 7671).</p></dd></dl><dl><dt class="spec value" id="val-service_exn"><a href="#val-service_exn" class="anchor"></a><code><span class="keyword">val</span> service_exn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `service ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>service_exn t</code> is <code>`service t</code> if <code>t</code> is a service name (see <a href="index.html#val-service"><code>service</code></a>).</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>t</code> is not a service names.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-raw"><a href="#val-raw" class="anchor"></a><code><span class="keyword">val</span> raw : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>raw t</code> is the <code>`raw t</code>.</p></dd></dl><dl><dt class="spec value" id="val-count_labels"><a href="#val-count_labels" class="anchor"></a><code><span class="keyword">val</span> count_labels : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p><code>count_labels name</code> returns the amount of labels in <code>name</code>.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <span>subdomain:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span>domain:<span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>sub ~subdomain ~domain</code> is <code>true</code> if <code>subdomain</code> contains any labels prepended to <code>domain</code>: <code>foo.bar.com</code> is a subdomain of <code>bar.com</code> and of <code>com</code>, <code>sub ~subdomain:x ~domain:root</code> is true for all <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-get_label"><a href="#val-get_label" class="anchor"></a><code><span class="keyword">val</span> get_label : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(string, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>get_label name idx</code> retrieves the label at index <code>idx</code> from <code>name</code>. If <code>idx</code> is out of bounds, an Error is returned.</p></dd></dl><dl><dt class="spec value" id="val-get_label_exn"><a href="#val-get_label_exn" class="anchor"></a><code><span class="keyword">val</span> get_label_exn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string</code></dt><dd><p><code>get_label_exn name idx</code> is the label at index <code>idx</code> in <code>name</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>idx</code> is out of bounds in <code>name</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-prepend_label"><a href="#val-prepend_label" class="anchor"></a><code><span class="keyword">val</span> prepend_label : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><h3 id="label-addition-and-removal"><a href="#label-addition-and-removal" class="anchor"></a>Label addition and removal</h3><p><code>prepend_label name pre</code> is either <code>t</code>, the new domain name, or an error.</p></dd></dl><dl><dt class="spec value" id="val-prepend_label_exn"><a href="#val-prepend_label_exn" class="anchor"></a><code><span class="keyword">val</span> prepend_label_exn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>prepend_label_exn name pre</code> is <code>t</code>, the new domain name.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pre</code> is not a valid domain name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-drop_label"><a href="#val-drop_label" class="anchor"></a><code><span class="keyword">val</span> drop_label : <span>?&#8288;back:bool</span> <span>&#45;&gt;</span> <span>?&#8288;amount:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>drop_label ~back ~amount t</code> is either <code>t</code>, a domain name with <code>amount</code> (defaults to 1) labels dropped from the beginning - if <code>back</code> is provided and <code>true</code> (default <code>false</code>) labels are dropped from the end. <code>drop_label (of_string_exn &quot;foo.com&quot;) = Ok (of_string_exn &quot;com&quot;)</code>, <code>drop_label ~back:true (of_string_exn &quot;foo.com&quot;) = Ok (of_string_exn &quot;foo&quot;)</code>.</p></dd></dl><dl><dt class="spec value" id="val-drop_label_exn"><a href="#val-drop_label_exn" class="anchor"></a><code><span class="keyword">val</span> drop_label_exn : <span>?&#8288;back:bool</span> <span>&#45;&gt;</span> <span>?&#8288;amount:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>drop_label_exn ~back ~amount t</code>, see <a href="index.html#val-drop_label"><code>drop_label</code></a>. Instead of a <code>result</code>, the value is returned directly.</p><dl><dt>raises Invalid_argument</dt><dd><p>if there are not sufficient labels.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-append"><a href="#val-append" class="anchor"></a><code><span class="keyword">val</span> append : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>append pre post</code> is <code>pre ^ &quot;.&quot; ^ post</code>.</p></dd></dl><dl><dt class="spec value" id="val-append_exn"><a href="#val-append_exn" class="anchor"></a><code><span class="keyword">val</span> append_exn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>append_exn pre post</code> is <code>pre ^ &quot;.&quot; ^ post</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if the result would violate length restrictions.</p></dd></dl></dd></dl></section><section><header><h3 id="comparison"><a href="#comparison" class="anchor"></a>Comparison</h3></header><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span>?&#8288;case_sensitive:bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal ~case t t'</code> is <code>true</code> if all labels of <code>t</code> and <code>t'</code> are equal. If <code>case_sensitive</code> is provided and <code>true</code>, the cases of the labels are respected (default: <code>false</code>).</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare t t'</code> compares the domain names <code>t</code> and <code>t'</code> using a case insensitive string comparison.</p></dd></dl><dl><dt class="spec value" id="val-compare_sub"><a href="#val-compare_sub" class="anchor"></a><code><span class="keyword">val</span> compare_sub : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare_sub t t'</code> compares the labels <code>t</code> and <code>t'</code> using a case insensitive string comparison.</p></dd></dl></section><section><header><h3 id="collections"><a href="#collections" class="anchor"></a>Collections</h3></header><dl><dt class="spec module" id="module-Host_map"><a href="#module-Host_map" class="anchor"></a><code><span class="keyword">module</span> <a href="Host_map/index.html">Host_map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The module of a host name map</p></dd></dl><dl><dt class="spec module" id="module-Host_set"><a href="#module-Host_set" class="anchor"></a><code><span class="keyword">module</span> Host_set : Stdlib.Set.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Host_set">Host_set</a>.elt = <span><span>[ `host ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>The module of a host name set</p></dd></dl><dl><dt class="spec module" id="module-Service_map"><a href="#module-Service_map" class="anchor"></a><code><span class="keyword">module</span> <a href="Service_map/index.html">Service_map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The module of a service name map</p></dd></dl><dl><dt class="spec module" id="module-Service_set"><a href="#module-Service_set" class="anchor"></a><code><span class="keyword">module</span> Service_set : Stdlib.Set.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Service_set">Service_set</a>.elt = <span><span>[ `service ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>The module of a service name set</p></dd></dl><dl><dt class="spec module" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span class="keyword">module</span> <a href="Map/index.html">Map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The module of a domain name map</p></dd></dl><dl><dt class="spec module" id="module-Set"><a href="#module-Set" class="anchor"></a><code><span class="keyword">module</span> Set : Stdlib.Set.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Set">Set</a>.elt = <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>The module of a domain name set</p></dd></dl></section><section><header><h3 id="string-list-representation"><a href="#string-list-representation" class="anchor"></a>String list representation</h3></header><dl><dt class="spec value" id="val-of_strings"><a href="#val-of_strings" class="anchor"></a><code><span class="keyword">val</span> of_strings : <span>string list</span> <span>&#45;&gt;</span> <span><span>(<span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>of_strings labels</code> is either <code>t</code>, a domain name, or an error if the provided <code>labels</code> violate domain name constraints. A trailing empty label is not required.</p></dd></dl><dl><dt class="spec value" id="val-of_strings_exn"><a href="#val-of_strings_exn" class="anchor"></a><code><span class="keyword">val</span> of_strings_exn : <span>string list</span> <span>&#45;&gt;</span> <span><span>[ `raw ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_strings_exn labels</code> is <code>t</code>, a domain name. A trailing empty label is not required.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>labels</code> are not a valid domain name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_strings"><a href="#val-to_strings" class="anchor"></a><code><span class="keyword">val</span> to_strings : <span>?&#8288;trailing:bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p><code>to_strings ~trailing t</code> is the list of labels of <code>t</code>. If <code>trailing</code> is provided and <code>true</code> (defaults to <code>false</code>), the resulting list will contain a trailing empty label.</p></dd></dl></section><section><header><h3 id="pretty-printer"><a href="#pretty-printer" class="anchor"></a>Pretty printer</h3></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> Fmt.t</span></code></dt><dd><p><code>pp ppf t</code> pretty prints the domain name <code>t</code> on <code>ppf</code>.</p></dd></dl></section></div></body></html>